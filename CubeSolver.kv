#:import timedelta datetime.timedelta
#from kivy.core.window import Window

<CubeSolver>: # BoxLayout
    orientation: 'vertical'
#    on_touch_down: root.start()
    canvas:
        Color:
            rgba: 0.95,0.95,0.95,1
        Rectangle:
            size: self.size
            pos: self.pos
    ActionBar:
        pos_hint: {'top':1}
        background_image: 'atlas://resources/images/elements/background_white'
        background_color: .91, .45, 0 , 1
        ActionView:
            use_separator: True
            ActionPrevious:
                title: 'Action Bar'
                with_previous: False
            ActionOverflow:
                overflow_image: 'atlas://resources/images/elements/menu'
#                allow_stretch: False
                # overflow_color: 0,0,0,1
                ActionButton:
                    text: "Clear Times"
                    on_press: root.database.clear()
                ActionButton:
                    text: "Help"
                ActionButton:
                    text: "About"
    AndroidTabs:
        # Timer
        Tab:
            on_touch_up: root.start()
            on_touch_down: root.stop()
            text: "TIMER"
            orientation: 'vertical'
            Header:
                text: 'Timer'
            Faces:
                size_hint: (root.size_hint_x *.85, root.size_hint_y *.6)
                pos_hint: {'center_x': .5, 'center_y': .8}
                on_parent: self.draw_face()
                on_touch_down: self.clear_widgets()
                on_touch_up: self.draw_face()
                padding: (0, 15, 0, 0)

            Label:
                text: root.scramble
                font_name: 'Resources\Fonts\GOTHIC.TTF'
                font_size: 13.5
                color: .25, .25, .25, 1
                text_size: self.size
                halign: 'center'
                valign: 'bottom'
                size_hint: (root.size_hint_x, .7)
            Label:
                text: root.time_format(root.time)
                font_size: 46
                font_name: 'Resources\Fonts\GOTHIC.TTF'
                color: .25, .25, .25, 1
                text_size: self.size
                halign: 'center'
                valign: 'top'
            Image:
                size_hint: .85, .85
                size: self.size
                pos_hint: {'center_x': .5, 'center_y':.5}
                source: root.timer_button
        Tab:
            text: "SOLVER"
    UserStats:
        size_hint: .97, .97
        pos_hint: {'center_x': .5, 'center_y': .5}
        background_image: 'resources/images/elements/background_white'
        background_color: 0.95,0.95,0.95,1
        do_default_tab: False

        TabbedPanelItem:
            background_down: 'atlas://resources/images/elements/tabs'
            background_normal: 'atlas://resources/images/elements/none'
            text: 'Historial'
        TabbedPanelItem:
            background_down: 'atlas://resources/images/elements/tabs'
            background_normal: 'atlas://resources/images/elements/none'
            text: 'Estadisticas'
            BoxLayout:
                Label:
                    text: 'Second tab content area'
                Button:
                    text: 'Button that does nothing'
<AndroidTabsBar>:
    canvas.before:
        Color:
            rgba: .91, .45, 0 , 1
        Rectangle:
            size: self.size
            pos: self.pos
        Color:
            rgba: 0.95,0.95,0.95,1
        Rectangle:
            pos: self.pos[0], self.pos[1]
            size: self.size[0], 0
        Rectangle:
            pos: self.pos[0], self.pos[1]
            size: self.size[0], 0
        Rectangle:
            pos: self.pos[0], self.pos[1]
            size: self.size[0], 0
<Tab>:
    canvas:
        Color:
            rgba: 0.95,0.95,0.95,1
        Rectangle:
            size: self.size
            pos: self.pos
<Header>:
    color: .25, .25, .25, 1
    font_name: 'Resources\Fonts\GOTHIC.TTF'
    font_size: 16
    text_size: self.size
    halign: 'left'
    valign: 'top'
    pos_hint_y: root.top - 10
    # El 1 es porque la size es porcentual, siendo 1 (100%) el size total de la 'ventana'
    size_hint: 1, .45
    padding: 25, 5
    text_size: self.size
    canvas.before:
        Color:
            rgba: .91, .45, 0 , .2
        Rectangle:
            size: (root.width*.97, 2)
            pos: (self.center_x *.03, self.y - 2)